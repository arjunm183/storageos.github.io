{
  "version": 1,
  "width": 266,
  "height": 44,
  "duration": 127.177431,
  "command": null,
  "title": null,
  "env": {
    "TERM": "xterm-256color",
    "SHELL": "/bin/bash"
  },
  "stdout": [
    [
      0.010488,
      "\u001b[?1034hbash-3.2$ "
    ],
    [
      2.5,
      "ssh"
    ],
    [
      0.000192,
      " origin-0.do.storageos"
    ],
    [
      3.2e-05,
      ".net"
    ],
    [
      2.4e-05,
      " -"
    ],
    [
      2.3e-05,
      "l"
    ],
    [
      4.9e-05,
      " r"
    ],
    [
      5.3e-05,
      "oot"
    ],
    [
      0.358493,
      "\r\n"
    ],
    [
      0.296695,
      "Last login: Fri Nov  3 16:26:59 2017 from 212.36.56.22\r\r\n"
    ],
    [
      0.64266,
      "\u001b]0;root@origin-0:~\u0007\u001b[?1034h[root@origin-0 ~]# "
    ],
    [
      2.5,
      "# Dynamic Provisioning"
    ],
    [
      0.279251,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "# Set up a StorageClass"
    ],
    [
      0.278754,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# cat > storageos-sc.yaml <<EOF\r\n> ---\r\n> kind: StorageClass\r\n> apiVersion: storage.k8s.io/v1beta1\r\n> metadata:\r\n>   name: fast\r\n> provisioner: kubernetes.io/storageos\r\n> parameters:\r\n>   pool: default\r\n>   description: Kubernetes volume\r\n>   fsType: ext4\r\n>   adminSecretNamespace: default\r\n>   adminSecretName: storageos-secret\r\n> ...\r\n> EOF"
    ],
    [
      0.744803,
      "\r\n"
    ],
    [
      0.003375,
      "\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc create -f storageos-sc.yaml"
    ],
    [
      0.222974,
      "\r\n"
    ],
    [
      0.424389,
      "Error from server (AlreadyExists): error when creating \"storageos-sc.yaml\": storageclasses.storage.k8s.io \"fast\" already exists\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "o"
    ],
    [
      0.26369,
      "c"
    ],
    [
      0.159201,
      " "
    ],
    [
      0.144291,
      "d"
    ],
    [
      0.224021,
      "e"
    ],
    [
      0.191077,
      "l"
    ],
    [
      0.095931,
      "e"
    ],
    [
      0.233358,
      "t"
    ],
    [
      0.07955,
      "e"
    ],
    [
      0.104104,
      " "
    ],
    [
      0.144537,
      "s"
    ],
    [
      0.23179,
      "t"
    ],
    [
      0.159638,
      "o"
    ],
    [
      0.080156,
      "r"
    ],
    [
      0.175589,
      "a"
    ],
    [
      0.168,
      "g"
    ],
    [
      0.064354,
      "e"
    ],
    [
      0.376311,
      "c"
    ],
    [
      0.151392,
      "l"
    ],
    [
      0.128663,
      "a"
    ],
    [
      0.167238,
      "s"
    ],
    [
      0.159834,
      "s"
    ],
    [
      0.136331,
      " "
    ],
    [
      0.168355,
      "f"
    ],
    [
      0.216549,
      "a"
    ],
    [
      0.078974,
      "s"
    ],
    [
      0.305777,
      "t"
    ],
    [
      0.285801,
      "\r\n"
    ],
    [
      0.447745,
      "storageclass \"fast\" deleted\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      0.97739,
      "oc delete storageclass fast"
    ],
    [
      0.174426,
      "\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[Ccreate -f storageos-sc.yaml"
    ],
    [
      0.836112,
      "\r\n"
    ],
    [
      0.469917,
      "storageclass \"fast\" created\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc describe storageclass fast"
    ],
    [
      0.374194,
      "\r\n"
    ],
    [
      0.474104,
      "Name:\t\tfast\r\nIsDefaultClass:\tNo\r\nAnnotations:\t<none>\r\nProvisioner:\tkubernetes.io/storageos\r\nParameters:\tadminSecretName=storageos-secret,adminSecretNamespace=default,description=Kubernetes volume,fsType=ext4,pool=default\r\nEvents:\t\t<none>\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "# Create a PVC refering to the StorageClass. This allows OpenShift to create the volume in StorageOS"
    ],
    [
      0.340128,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "cat > storageos-sc-pvc.yaml <<EOF\r\n> ---\r\n> apiVersion: v1\r\n> kind: PersistentVolumeClaim\r\n> metadata:\r\n>   name: fast0001\r\n>   annotations:\r\n>     volume.beta.kubernetes.io/storage-class: fast\r\n> spec:\r\n>   accessModes:\r\n>     - ReadWriteOnce\r\n>   resources:\r\n>     requests:\r\n>       storage: 5Gi\r\n> ...\r\n> EOF"
    ],
    [
      0.775449,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc create -f storageos-sc-pvc.yaml"
    ],
    [
      0.288658,
      "\r\n"
    ],
    [
      0.439337,
      "persistentvolumeclaim \"fast0001\" created\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc get pvc fast0001"
    ],
    [
      0.279198,
      "\r\n"
    ],
    [
      0.300466,
      "NAME       STATUS    VOLUME                                     CAPACITY   ACCESSMODES   STORAGECLASS   AGE\r\nfast0001   Bound     pvc-b9749504-c0b4-11e7-b23a-5e89431fa021   5Gi        RWO           fast           5s\r\n"
    ],
    [
      0.00121,
      "\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc describe pvc fast0001"
    ],
    [
      0.336046,
      "\r\n"
    ],
    [
      0.424725,
      "Name:\t\tfast0001\r\nNamespace:\tdefault\r\nStorageClass:\tfast\r\nStatus:\t\tBound\r\nVolume:\t\tpvc-b9749504-c0b4-11e7-b23a-5e89431fa021\r\nLabels:\t\t<none>\r\nAnnotations:\tpv.kubernetes.io/bind-completed=yes\r\n\t\tpv.kubernetes.io/bound-by-controller=yes\r\n\t\tvolume.beta.kubernetes.io/storage-class=fast\r\n\t\tvolume.beta.kubernetes.io/storage-provisioner=kubernetes.io/storageos\r\nCapacity:\t5Gi\r\nAccess Modes:\tRWO\r\nEvents:\r\n  FirstSeen\tLastSeen\tCount\tFrom\t\t\t\tSubObjectPath\tType\t\tReason\t\t\tMessage\r\n  ---------\t--------\t-----\t----\t\t\t\t-------------\t--------\t------\t\t\t-------\r\n  10s\t\t10s\t\t1\tpersistentvolume-controller\t\t\tNormal\t\tProvisioningSucceeded\tSuccessfully provisioned volume pvc-b9749504-c0b4-11e7-b23a-5e89431fa021 using kubernetes.io/storageos\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "# A new persistent volume will also be created and bound to the pvc:"
    ],
    [
      0.534692,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc describe pv $( oc get pvc fast0001 -o template --template \"{{.spec.volumeName}}\" )"
    ],
    [
      0.560822,
      "\r\n"
    ],
    [
      0.762099,
      "Name:\t\tpvc-b9749504-c0b4-11e7-b23a-5e89431fa021\r\nLabels:\t\tstorageos.driver=filesystem\r\nAnnotations:\tkubernetes.io/createdby=storageos-dynamic-provisioner\r\n\t\tpv.kubernetes.io/bound-by-controller=yes\r\n\t\tpv.kubernetes.io/provisioned-by=kubernetes.io/storageos\r\nStorageClass:\tfast\r\nStatus:\t\tBound\r\nClaim:\t\tdefault/fast0001\r\nReclaim Policy:\tDelete\r\nAccess Modes:\tRWO\r\nCapacity:\t5Gi\r\nMessage:\t\r\nSource:\r\n    Type:\t\tStorageOS (a StorageOS Persistent Disk resource)\r\n    VolumeName:\t\tpvc-b9749504-c0b4-11e7-b23a-5e89431fa021\r\n    VolumeNamespace:\tdefault\r\n    FSType:\t\text4\r\n    ReadOnly:\t\tfalse\r\nEvents:\t\t\t<none>\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "ssh origin-1 storageos volume ls"
    ],
    [
      0.305819,
      "\r\n"
    ],
    [
      0.552723,
      "NAMESPACE/NAME                                     SIZE                MOUNTED BY                  NODE SELECTOR       STATUS              REPLICAS            LOCATION\r\ndefault/nginx-pv01                                 5GB                 origin-2.do.storageos.net                       active              1/1                 origin-2 (healthy)\r\ndefault/nginx-vol01                                5GB                 origin-1.do.storageos.net                       active              0/0                 origin-3 (healthy)\r\ndefault/pvc-b9749504-c0b4-11e7-b23a-5e89431fa021   5GB                                                                 active              0/0                 origin-1 (healthy)\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "# And now a pod using this PVC"
    ],
    [
      0.270414,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "cat > storageos-sc-pvcpod.yaml <<EOF\r\n> ---\r\n> apiVersion: v1\r\n> kind: Pod\r\n> metadata:\r\n>   labels:\r\n>     name: nginx\r\n>     role: master\r\n>   name: test-storageos-nginx-sc-pvc\r\n> spec:\r\n>   containers:\r\n>     - name: master\r\n>       image: nginx\r\n>       env:\r\n>         - name: MASTER\r\n>           value: \"true\"\r\n>       ports:\r\n>         - containerPort: 80\r\n>       resources:\r\n>         limits:\r\n>           cpu: \"0.1\"\r\n>       volumeMounts:\r\n>         - mountPath: /usr/share/nginx/html\r\n>           name: nginx-data\r\n>   volumes:\r\n>     - name: nginx-data\r\n>       persistentVolumeClaim:\r\n>         claimName: fast0001\r\n> ...\r\n> EOF"
    ],
    [
      1.349734,
      "\r\n"
    ],
    [
      0.001896,
      "\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc create -f storageos-sc-pvcpod.yaml"
    ],
    [
      0.277434,
      "\r\n"
    ],
    [
      0.457447,
      "pod \"test-storageos-nginx-sc-pvc\" created\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "oc get pods test-storageos-nginx-sc-pvc"
    ],
    [
      0.471323,
      "\r\n"
    ],
    [
      0.416297,
      "NAME                          READY     STATUS              RESTARTS   AGE\r\ntest-storageos-nginx-sc-pvc   0/1       ContainerCreating   0          7s\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "o"
    ],
    [
      0.14413,
      "c"
    ],
    [
      0.225479,
      " "
    ],
    [
      0.239282,
      "d"
    ],
    [
      0.224298,
      "e"
    ],
    [
      0.223903,
      "s"
    ],
    [
      0.190934,
      "c"
    ],
    [
      0.256679,
      "r"
    ],
    [
      0.19134,
      "i"
    ],
    [
      0.242098,
      "b"
    ],
    [
      0.101663,
      "e"
    ],
    [
      0.113732,
      " "
    ],
    [
      0.247098,
      "p"
    ],
    [
      0.239647,
      "o"
    ],
    [
      0.321805,
      "d"
    ],
    [
      0.070037,
      "s"
    ],
    [
      0.587459,
      " "
    ],
    [
      0.44172,
      "test-storageos-nginx-sc-pvc"
    ],
    [
      0.373198,
      "\r\n"
    ],
    [
      0.355853,
      "Name:\t\ttest-storageos-nginx-sc-pvc\r\nNamespace:\tdefault\r\nNode:\t\torigin-1.do.storageos.net/138.68.183.193\r\nStart Time:\tFri, 03 Nov 2017 16:34:22 +0000\r\nLabels:\t\tname=nginx\r\n\t\trole=master\r\nAnnotations:\topenshift.io/scc=anyuid\r\nStatus:\t\tRunning\r\nIP:\t\t10.34.0.38\r\nContainers:\r\n  master:\r\n    Container ID:\tdocker://7d1cc06f1b9c5e2dec1a57d120fbc9295718d35bab08a7281f15f6a3d9f75228\r\n    Image:\t\tnginx\r\n    Image ID:\t\tdocker-pullable://docker.io/nginx@sha256:adea4f68096fded167603ba6663ed615a80e090da68eb3c9e2508c15c8368401\r\n    Port:\t\t80/TCP\r\n    State:\t\tRunning\r\n      Started:\t\tFri, 03 Nov 2017 16:34:37 +0000\r\n    Ready:\t\tTrue\r\n    Restart Count:\t0\r\n    Limits:\r\n      cpu:\t100m\r\n    Requests:\r\n      cpu:\t100m\r\n    Environment:\r\n      MASTER:\ttrue\r\n    Mounts:\r\n      /usr/share/nginx/html from nginx-data (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-2gpwn (ro)\r\nConditions:\r\n  Type\t\tStatus\r\n  Initialized \tTrue \r\n  Ready \tTrue \r\n  PodScheduled \tTrue \r\nVolumes:\r\n  nginx-data:\r\n    Type:\tPersist"
    ],
    [
      0.000167,
      "entVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)\r\n    ClaimName:\tfast0001\r\n    ReadOnly:\tfalse\r\n  default-token-2gpwn:\r\n    Type:\tSecret (a volume populated by a Secret)\r\n    SecretName:\tdefault-token-2gpwn\r\n    Optional:\tfalse\r\nQoS Class:\tBurstable\r\nNode-Selectors:\t<none>\r\nTolerations:\t<none>\r\nEvents:\r\n  FirstSeen\tLastSeen\tCount\tFrom\t\t\t\t\tSubObjectPath\t\tType\t\tReason\t\t\tMessage\r\n  ---------\t--------\t-----\t----\t\t\t\t\t-------------\t\t--------\t------\t\t\t-------\r\n  27s\t\t27s\t\t1\tdefault-scheduler\t\t\t\t\t\tNormal\t\tScheduled\t\tSuccessfully assigned test-storageos-nginx-sc-pvc to origin-1.do.storageos.net\r\n  26s\t\t26s\t\t1\tkubelet, origin-1.do.storageos.net\t\t\t\tNormal\t\tSuccessfulMountVolume\tMountVolume.SetUp succeeded for volume \"default-token-2gpwn\" \r\n  19s\t\t19s\t\t1\tkubelet, origin-1.do.storageos.net\t\t\t\tNormal\t\tSuccessfulMountVolume\tMountVolume.SetUp succeeded for volume \"pvc-b9749504-c0b4-11e7-b23a-5e89431fa021\" \r\n  17s\t\t17s\t\t1\tkubelet, origin-1.do.storageos.net\tspec.containers{master}\tNormal\t\tPulling\t\t"
    ],
    [
      0.000286,
      "\tpulling image \"nginx\"\r\n  13s\t\t13s\t\t1\tkubelet, origin-1.do.storageos.net\tspec.containers{master}\tNormal\t\tPulled\t\t\tSuccessfully pulled image \"nginx\"\r\n  13s\t\t13s\t\t1\tkubelet, origin-1.do.storageos.net\tspec.containers{master}\tNormal\t\tCreated\t\t\tCreated container\r\n  12s\t\t12s\t\t1\tkubelet, origin-1.do.storageos.net\tspec.containers{master}\tNormal\t\tStarted\t\t\tStarted container\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "ssh origin-1 storageos volume ls"
    ],
    [
      0.329712,
      "\r\n"
    ],
    [
      0.500449,
      "NAMESPACE/NAME                                     SIZE                MOUNTED BY                  NODE SELECTOR       STATUS              REPLICAS            LOCATION\r\ndefault/nginx-pv01                                 5GB                 origin-2.do.storageos.net                       active              1/1                 origin-2 (healthy)\r\ndefault/nginx-vol01                                5GB                 origin-1.do.storageos.net                       active              0/0                 origin-3 (healthy)\r\ndefault/pvc-b9749504-c0b4-11e7-b23a-5e89431fa021   5GB                 origin-1.do.storageos.net                       active              0/0                 origin-1 (healthy)\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "#"
    ],
    [
      0.348182,
      " "
    ],
    [
      0.11228,
      "a"
    ],
    [
      0.152134,
      "n"
    ],
    [
      0.071921,
      "d"
    ],
    [
      0.152168,
      " "
    ],
    [
      0.314871,
      "t"
    ],
    [
      0.149764,
      "h"
    ],
    [
      0.08273,
      "e"
    ],
    [
      0.141832,
      " "
    ],
    [
      0.308065,
      "S"
    ],
    [
      0.254073,
      "t"
    ],
    [
      0.127966,
      "o"
    ],
    [
      0.087521,
      "r"
    ],
    [
      0.171362,
      "a"
    ],
    [
      1.062265,
      "g"
    ],
    [
      0.072107,
      "e"
    ],
    [
      0.417041,
      "O"
    ],
    [
      0.056072,
      "S"
    ],
    [
      0.182394,
      " "
    ],
    [
      0.246696,
      "v"
    ],
    [
      0.103452,
      "o"
    ],
    [
      0.200308,
      "l"
    ],
    [
      0.207939,
      "u"
    ],
    [
      0.21703,
      "m"
    ],
    [
      0.127221,
      "e"
    ],
    [
      0.081389,
      " "
    ],
    [
      0.167927,
      "i"
    ],
    [
      0.136535,
      "s"
    ],
    [
      0.087825,
      " "
    ],
    [
      0.176575,
      "m"
    ],
    [
      0.169824,
      "o"
    ],
    [
      0.12691,
      "u"
    ],
    [
      0.242065,
      "n"
    ],
    [
      0.110108,
      "t"
    ],
    [
      0.046886,
      "e"
    ],
    [
      0.258388,
      "d"
    ],
    [
      2.307203,
      "\r\n\u001b]0;root@origin-0:~\u0007[root@origin-0 ~]# "
    ],
    [
      2.5,
      "logout\r\n"
    ],
    [
      0.007643,
      "Connection to origin-0.do.storageos.net closed.\r\r\n"
    ]
  ]
}
